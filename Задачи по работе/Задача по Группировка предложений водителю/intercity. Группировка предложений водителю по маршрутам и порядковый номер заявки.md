
https://hivetaxi.atlassian.net/browse/HD-8403


client <- Docker.unixSocket(UnixSocketAddress("/var/run/docker.sock")) - подключение к докеру для тестов


https://www.figma.com/board/k8dU6xt2z72g7ifvATYpSa/Попутки?t=NBzvAUXdgWCHajt6-1 - фигма на картинки по интресити и конкретно по этой задачи

Костя говорит, что в таблице intercity.client_views_by_route не получится через нее запросом clientTicketsByDriverTicketId достать вложенные заявки клиентские, нужно будет создать новую таблицу с похожими параметрами, но у которых будет другой кластеринг ключ - еще раз уточнить что это такое и почему он будет другой


еще раз внимательно почитать про partition key в кассандре


Подумать еще раз над порядковым номером - пока неясно что это такое и как его использовать

Порядковый номер - это номер водительской заявки в отображении для клиентов, покупается отдельно, должен быть запрос на поднятие в списке

package object route - там находятся все данные по маршруту, понять какой объект передавать в качестве параметра в методе(мы передаем маршрут - "Алматы - Астана")

Похоже тут надо создать новую таблицу в которой у нас будет сохраняться маршрут по id - где сам маршрут

данные будут хранится в таблице и браться из client_views_by_route?


	нужно создать новый класс ClientView - так как в предыдущем нет полей dest_id и dep_id ?


В facade clientFacade там нужно что-то сделать или прокинуть в новый дао этот фасад


ClientTicketDaoFacade
DriverTicketDaoFacade - разобраться что происходит в данных фасадах и для чего они нужны вообще и что имел ввиду Костя, когда говорил о них

Для другого запроса тоже надо создать дао и в сервисе реализовать

По запросу с группировкой по маршруту и присваиванию порядкого номера -
не нужно создавать отдельную таблицу и дао для этого, можно воспользоваться дао и сервисом, которые уже есть, 
дао в котором мы находим клиентские заявки по маршруту

ticketId - это заявка, она одинакова что для клиента что для водителя

Дима подкинул идею добавлять в список id заявок и так сохранять и потом получается будет список, нужно будет также создать новое дао для этого всего


Меняем значение в таблице миграции, на pckt_id


Сообщения Кости в личке:

Находишь заявку, потом по параметрам этой заявки список DriverView и фильтр по driverId

Сохранение в DriverTicketByIdDao уже идет через фасад

Искать заявку можно по нему

И там уже более конкретно понятно будет что не так

Ты написал как данные забрать с Dao
Найди ClientTicketDaoFacade
Это единое место где происходит сохранение
Собственно в твой дао там тоже должно происходить сохранение
Dao=>Service=>Facade
Схема такая Сервис ходит в фасад

есть уже готовые реализация в client_ticket тестах с использованием сервиса

test("Draft => Active")  в данном тесте используется честное сохранение по маршруту в базу


DriverTicketDaoFacade - там сохраняются все водительские билеты и вьюхи









