Изучал библиотеку tapir , как работает описание HTTP API, как там определяются ендпоинты. Как работаю хедеры как часть ендпоинта.

Работал с запросом на изменение способа оплаты на коре и витрине, как раз с использованием библиотеки тапир.

На витрине добавил  хедеры profileId, phone, X_CLIENT_APP_PROFILE в ендпоинт, далее определил что будет происходить с входными параметрами включая заголовки.

 добавил также отправку  данных параметров в заголовках   на витрине

В целом данная реализация работает, интерсервисный запрос на изменение способа оплаты работает. 

Но после уточнения с Димой, что надо брать эти параметры из самого заказа, а не из заголовках и аргументах, для безопасности, пересматрел логику написания запроса. Нужно брать и телефон и профиль айди и клиент айди из самого заказа.

Вчера ночью добавил изменения и выкатил коммит

клиентАди прокинул из заказа
телефон же и profileId закинул в класс OrderParameters и StatusDto
и уже получилось их из заказа взять.

немного протестил, шлет GLA_INAPPROPRIATE_ORDER_STATUS

Сегодня буду заниматься редактированием, тестированием


Профиль айди прокинуть тоже можно в StatusDTO?



