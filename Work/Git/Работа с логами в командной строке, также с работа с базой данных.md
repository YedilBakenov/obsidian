 #Scala 
#work 

docker ps -a - просмотр всех контейнеров
docker logs -f -n 30 <container_name_or_id> - просмотр логов на конкретном контейнере

cntl + c - выйти в предыдущее действие в командной строке

Можно открывать несколько командных строк и тестировать на каждой

Чтобы тестировать на ошибки свои задачки(ендпоинты, ...)

В командной строке подключаться к тестированию, прописать:

1. посмотреть логи 
2.  tail -f /var/log/backend/hive_dev5/hive.log - тут надо указать нужный дев на который ты задеплоил
3. history | grep dev4 - история логов
4. tail /var/log/backend/hive_dev5/hive.log -n100 - показывает последние 100 строк

стекд + с - выход на маке 

https://hivetaxi.atlassian.net/wiki/spaces/HIVETAXI/pages/edit-v2/1942126875

tail -f /var/log/backend/hive_dev2/application.log

 ssh backend@dev.regionlab.kz -p20022 - заходим через консоль

	docker logs -f hivetaxi-backend-client-orders-showcase-dev5 - смотрим логи на нужном сервисе
 
 cqlsh - работа с базой
 select * from client - выбираем нужную базу

docker logs -f -n 30 hivetaxi-backend-client-orders-showcase-dev0

docker restart hivetaxi-backend-core-dev5 - через консоль деплоить контейнеры

docker ps | grep core - показывает все соответствия на слово 'core'


v - показывает логи на нужном деве и нужном окружении


tail /var/log/backend/hive_dev5/hive.log -n100 - показывает 100 последних строк ошибок

docker restart hivetaxi-backend-core-dev5 - рестарт докера на окружении 


docker ps |grep show - можно сокращать поиск для showcase как пример

docker logs -f -n 30 hivetaxi-backend-client-orders-showcase-dev0, где f - это показ ошибок в реалтайме, а без f просто один раз выведет


docker restart hivetaxi-backend-core-dev5 - через консоль деплоить контейнеры

docker ps | grep core - показывает все соответствия на слово 'core'


clear либо cntrl + L - очищение командной строки

 docker ps | client-auth-service - просмотр каждого порта отдельного сервиса




в файле logback.xml нужно что-то менять чтобы потом деплотить, чтобы было возможно читать ошибки в докере, которые будут выводится благодаря данному коду:
_           <- Logger[F].debug(s"Retrieving client phone and avatar. Header 
Client Id = [$clientId]").eitherT




чтобы смотреть логи в терминале нужно добавить в файл logback меняем на DEBUG:

![[a1c159d8-c458-4430-b132-65e146ac1234.jpg]]


добавляем в нужных местах Logger:

![[b506d956-0418-4872-91ba-2b09d6643bbd.jpg]]

![[d3c72c30-f7cb-471e-bdaa-f114a45af54b.jpg]]


Меняем файл logback.xml в папке main, а не it. it - это интеграционные тесты

![[Снимок экрана 2024-06-07 003824.png]]
можно менять root - это главный файл логов, либо отдельный logger, но нужно понимать какой логгер менять на DEBUG.

далее выбрать нужный запрос и прописать там логи, например:

![[Снимок экрана 2024-06-07 004020.png | 1500]]

далее прописать в командной строке:

docker ps - выйдут все контейнеры

дальше выбрать нужный:

![[Снимок экрана 2024-06-07 014010.png]]

показались логи только на первом деве

дальше прописываем следующую команду(как пример):

docker logs 5332a5abed2e | grep "Client App Profiles"


где 5332a5abed2e - контейнер на дев1
 |  (pipe, "пайп"): - символ пайпа `|` используется для передачи вывода одной команды как ввода в другую команду. В данном случае, вывод всех логов контейнера передается команде `grep`.

grep "Client App Profiles - Команда `grep` ищет строки, содержащие текст `"Client App Profiles"`, в переданном ей потоке данных. В данном случае, это вывод логов контейнера.



Это полезно для того, чтобы найти и отобразить только нужные вам строки логов, содержащие определенные сообщения, и игнорировать все остальные. Например, если ваши отладочные сообщения всегда содержат строку `"Client App Profiles"`, то использование этой команды позволит вам быстро найти все такие сообщения в больших логах.


[https://logback.qos.ch/manual/architecture.html](https://logback.qos.ch/manual/architecture.html)


docker logs -f --tail 30 f2894a5adefe - смотреть на конкректном контейнере логи


Просмотр логов в файле application в командной строке:
https://hivetaxi.atlassian.net/wiki/spaces/HIVETAXI/pages/1942126875



cd /var/log/backend/hive_dev5 - где dev5 - необходимое намо окружение core mc - для перехода в коммандер Далее открываем нужные нам файлы: application.log - warn+ hive.log - info+







